<%= simple_form_for @basica, 
  url: @basica.id.nil? ? (admin_basicas_path(@basica)) : 
    admin_basica_path(@basica), 
  html: { class: 'form-horizontal' } do |f| %>
    <% atributos_form.each do |atr|  %>
      <% if @basica.class.columns_hash[atr].type == :date then %>
        <%= f.input atr.to_sym,
          :input_html => { "data-behaviour" => "datepicker"}, 
          :as => :string 
        %>
      <% elsif atr == "id_pais" %>
        <%= f.association :pais,
          collection: Pais.where(fechadeshabilitacion: nil).order(:nombre),
          label: "PaÃ­s",
          label_method: :nombre,
          value_method: :id %>
      <% elsif atr == "id_departamento" %>
        <%= f.association :departamento,
          collection: Departamento.where(fechadeshabilitacion: nil).order(:nombre),
          label: "Departamento",
          label_method: lambda {|t| t.nombre + " (" + 
            Pais.find(t.id_pais).nombre + ")"},
          value_method: :id %>
      <% elsif atr == "id_municipio" %>
        <%= f.association :municipio,
          collection: (Municipio.where(id_pais: f.object.id_pais, id_departamento: f.object.id_departamento, fechadeshabilitacion: nil).order(:nombre)),
          label: "Municipio",
          label_method: :nombre,
          value_method: :id %>
      <% elsif atr == "id_tclase" %>
        <%= f.association :tclase,
          collection: Tclase.where(fechadeshabilitacion: nil).order(:nombre),
          label: "Tipo de Clase",
          label_method: :nombre,
          value_method: :id %>
      <% elsif atr == "id_supracategoria" then %>
        <%= f.association :supracategoria,
          collection: Supracategoria.where(
            fechadeshabilitacion: nil).order(:nombre),
            label: "Supracategoria",
            label_method: lambda {|t| t.nombre + " (" + 
              Tviolencia.find(t.id_tviolencia).nombre + ")"},
            value_method: :id %>
      <% elsif atr == "id_tviolencia" then %>
        <%= f.association :tviolencia,
          collection: Tviolencia.where(
            fechadeshabilitacion: nil).order(:nombre),
          label: "Tipo de Violencia",
          label_method: :nombre,
          value_method: :id %>
      <% elsif atr == "id_pconsolidado" then %>
        <%= f.association :pconsolidado,
          collection: Pconsolidad.where(
            fechadeshabilitacion: nil).order(:nombre),
          label: "Consolidado",
          label_method: :nombre,
          value_method: :id %>
      <% elsif atr == "tipocat" then %>
        <%= f.input :tipocat, collection: [
          ["COLECTIVO", :C], ["INDIVIDUAL", :I], ["OTRO", :O]], 
          include_blank: false %>
      <% else %>
        <%= f.input atr.to_sym %>
      <% end %>
    <% end %>
    <div class="form-actions">
      <%= f.button :submit, :class => 'btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
        admin_basicas_path(@basica), :class => 'btn' 
      %>
    </div>
<% end %>
