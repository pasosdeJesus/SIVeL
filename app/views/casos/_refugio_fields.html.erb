<div class='control-group nested-fields'>
  <div class="controls">
    <%= f.input :fechasalida, 
      :input_html => { "data-behaviour" => "datepicker",
        value: f.object.fechasalida || @caso.fecha },
        :as => :string, :label => "Fecha Salida" %>
    <%= f.association :salida,
        collection: Ubicacion.where(:id_caso => @caso.id),
        label: "Sitio salida",
        label_method: lambda {|t| Pais.find(t.id_pais).nombre + (t.id_departamento.nil? ? "" : " / " + Departamento.find(t.id_departamento).nombre) },
        value_method: :id %>
    <%= f.input :fechallegada, 
        :input_html => { "data-behaviour" => "datepicker" },
        :as => :string, :label => "Fecha Llegada" %>
    <%= f.association :llegada,
        collection: Ubicacion.where(:id_caso => @caso.id),
	      label: "Sitio llegada",
        label_method: lambda {|t| Pais.find(t.id_pais).nombre + (t.id_departamento.nil? ? "" : " / " + Departamento.find(t.id_departamento).nombre) },
	      value_method: :id %>
    <%= f.association :causaref,
          collection: Causaref.where(fechadeshabilitacion: nil).order(:nombre),
          label_method: lambda {|t| t.nombre},
          label: "Causa del Refugio"
    %>
    <%= f.input :observaciones %>
    <%= f.input :id, as: :hidden %>
    <%= link_to_remove_association "Eliminar Refugio", f, 
        :class => 'btn-danger' %> 
  </div>
</div>
