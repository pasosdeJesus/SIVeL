<div class='control-group nested-fields'>
  <div class="controls">
    <%= f.input :fechaexpulsion, 
        :input_html => { "data-behaviour" => "datepicker",
          value: f.object.fechaexpulsion || @caso.fecha },
        :as => :string, :label => "Fecha Expulsión" %>
    <%= f.association :expulsion,
        collection: Ubicacion.where(:id_caso => @caso.id),
        label: "Sitio expulsión",
        label_method: lambda {|t| Pais.find(t.id_pais).nombre + (t.id_departamento.nil? ? "" : " / " + Departamento.find(t.id_departamento).nombre) },
        value_method: :id %>
    <%= f.input :fechallegada, 
        :input_html => { "data-behaviour" => "datepicker" },
        :as => :string, :label => "Fecha Llegada" %>
    <%= f.association :llegada,
        collection: Ubicacion.where(:id_caso => @caso.id),
	      label: "Sitio llegada",
        label_method: lambda {|t| Pais.find(t.id_pais).nombre + (t.id_departamento.nil? ? "" : " / " + Departamento.find(t.id_departamento).nombre) },
        #label_method: lambda {|t| Pais.find(t.id_pais).nombre},
        #label_method: :id_departamento,
	      value_method: :id %>
    <%= f.input :descripcion %>
    <%= link_to_remove_association "Eliminar Desplazamiento", f, 
        :class => 'btn-danger' %> 
  </div>
</div>
